
//: Declare String Begin

/*: "CardCellId" :*/
fileprivate let str_elementModelValue:[Character] = ["C","a","r","d","C","e"]
fileprivate let str_giftName:String = "publicly session type videollId"

/*: "icon_match_dislikeBtn_nor" :*/
fileprivate let str_nearText:String = "icocount"
fileprivate let str_makeName:String = "ch_dnot text self view view"
fileprivate let str_headValue:[Character] = ["e","B"]
fileprivate let str_toValue:[Character] = ["t","n","_","n","o","r"]

/*: "icon_match_hiBtn_nor" :*/
fileprivate let str_thanName:String = "win"
fileprivate let str_sizeData:[Character] = ["c","o","n","_","m","a","t","c","h","_","h","i","B","t","n","_","n","o","r"]

/*: "icon_match_likeBtn_nor" :*/
fileprivate let str_connectRowData:String = "istyleon"
fileprivate let str_valueName:String = "return share extension_like"
fileprivate let str_visualTitle:String = "mode"

/*: "Enable  Location" :*/
fileprivate let str_tableValue:String = "view varEnab"
fileprivate let str_progressName:String = "ocacolorion"

/*: "lng" :*/
fileprivate let str_imageBeginText:[UInt8] = [0x3d,0x3f,0x38]

fileprivate func reportCard(room num: UInt8) -> UInt8 {
    let value = Int(num) + 47
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "lat" :*/
fileprivate let str_femaleValue:[UInt8] = [0x4f,0x44,0x57]

fileprivate func viewAdd(fatal num: UInt8) -> UInt8 {
    let value = Int(num) + 29
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "icon_match_bg_location" :*/
fileprivate let str_makeContent:[Character] = ["i"]
fileprivate let str_sendTitle:String = "con_true case count size"
fileprivate let str_buttonValue:String = "h_bg_lprice data"

/*: "In order to recommend nearby people based on location, we need your permission to use location permissions" :*/
fileprivate let str_playerData:[UInt8] = [0xc0,0xe7,0xa9,0xe6,0xfb,0xed,0xec,0xfb,0xa9,0xfd,0xe6,0xa9,0xfb,0xec,0xea,0xe6,0xe4,0xe4,0xec,0xe7,0xed,0xa9,0xe7,0xec,0xe8,0xfb,0xeb,0xf0,0xa9,0xf9,0xec,0xe6,0xf9,0xe5,0xec,0xa9,0xeb,0xe8,0xfa,0xec,0xed,0xa9,0xe6,0xe7,0xa9,0xe5,0xe6,0xea,0xe8,0xfd,0xe0,0xe6,0xe7,0xa5,0xa9,0xfe,0xec,0xa9,0xe7,0xec,0xec,0xed,0xa9,0xf0,0xe6,0xfc,0xfb,0xa9,0xf9,0xec,0xfb,0xe4,0xe0,0xfa,0xfa,0xe0,0xe6,0xe7,0xa9,0xfd,0xe6,0xa9,0xfc,0xfa,0xec,0xa9,0xe5,0xe6,0xea,0xe8,0xfd,0xe0,0xe6,0xe7,0xa9,0xf9,0xec,0xfb,0xe4,0xe0,0xfa,0xfa,0xe0,0xe6,0xe7,0xfa]

private func automaticallyTap(origin num: UInt8) -> UInt8 {
    return num ^ 137
}

/*: "&type=0" :*/
fileprivate let str_appData:String = "&typelet let"
fileprivate let str_equalValue:[Character] = ["=","0"]

/*: "mf/business/list" :*/
fileprivate let str_leadingTitle:[Character] = ["m","f","/"]
fileprivate let str_shValue:[Character] = ["b","u","s","i","n","e","s","s","/","l","i","s","t"]

/*: "tab" :*/
fileprivate let str_touchValue:[UInt8] = [0x98,0x8d,0x8e]

/*: "page" :*/
fileprivate let str_callContent:[UInt8] = [0x65,0x67,0x61,0x70]

/*: "minAge" :*/
fileprivate let str_textBringInData:[UInt8] = [0x74,0x70,0x77,0x58,0x7e,0x7c]

private func pushTab(share num: UInt8) -> UInt8 {
    return num ^ 25
}

/*: "maxAge" :*/
fileprivate let str_readValue:[UInt8] = [0xbe,0xb2,0xab,0x92,0xb4,0xb6]

private func videoFalse(app num: UInt8) -> UInt8 {
    return num ^ 211
}

/*: "datingVideo" :*/
fileprivate let str_roomData:[UInt8] = [0xcc,0xc9,0xdc,0xc1,0xc6,0xcf,0xfe,0xc1,0xcc,0xcd,0xc7]

/*: "limitNum" :*/
fileprivate let str_actualStyleRawName:String = "limitNvar bottom minimum name live"
fileprivate let str_viewData:String = "slide"

/*: "expire" :*/
fileprivate let str_fileName:String = "row"
fileprivate let str_stopData:String = "sensepire"

/*: "Too frequent requests, please try again later" :*/
fileprivate let str_modelContent:[UInt8] = [0x4e,0x69,0x69,0x1a,0x60,0x6c,0x5f,0x6b,0x6f,0x5f,0x68,0x6e,0x1a,0x6c,0x5f,0x6b,0x6f,0x5f,0x6d,0x6e,0x6d,0x26,0x1a,0x6a,0x66,0x5f,0x5b,0x6d,0x5f,0x1a,0x6e,0x6c,0x73,0x1a,0x5b,0x61,0x5b,0x63,0x68,0x1a,0x66,0x5b,0x6e,0x5f,0x6c]

fileprivate func frameLeft(title num: UInt8) -> UInt8 {
    let value = Int(num) + 6
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "mf/newFeature/dislike" :*/
fileprivate let str_countNativeValue:[Character] = ["m","f","/","n","e","w","F","e","a","t","u","r","e","/"]
fileprivate let str_targetData:String = "dmessagelike"

/*: "uid" :*/
fileprivate let str_backgroundValue:[UInt8] = [0x64,0x69,0x75]

/*: "mf/newFeature/like" :*/
fileprivate let str_labValue:[Character] = ["m","f","/","n","e","w","F","e","a","t","u","r","e","/","l","i","k"]
fileprivate let str_labelData:[Character] = ["e"]

/*: "didRemoveCell forRowAtIndex =  :*/
fileprivate let str_appName:String = "didRemtype string hidden"
fileprivate let str_edgeTableNotText:String = "ovlevel"
fileprivate let str_kitData:String = "model name color send dismissCell f"
fileprivate let str_managerValue:String = "let to countwAtInd"

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  ClubRecognizerDelegate.swift
//  AbroadTalking
//
//  Created by Charlotte on 2023/5/18.
//

//: import UIKit
import UIKit

//: import JXPagingView
import JXPagingView

//: class TalkingClubVC: TalkingBaseViewController {
class ClubRecognizerDelegate: ServiceRecognizerDelegate {
    //: let CardCellId = "CardCellId"
    let CardCellId = (String(str_elementModelValue) + String(str_giftName.suffix(4)))

    //: var cellItems = [SocialUserListModel]()
    var cellItems = [VideoDeviceHandyJSON]() ///  数据模型数据
    //: var currenModel = SocialUserListModel.init()
    var currenModel = VideoDeviceHandyJSON()
    //: var currenCell: TalkingClubCardItemCell?
    var currenCell: ResourceFailRecognizerDelegate?
    //: var isShowSubscre = false
    var isShowSubscre = false
    //: var clubUserData = Set<TalkingMatchRemoveRedoModel>()
    var clubUserData = Set<LastHashable>()

    //: override func viewWillAppear(_ animated: Bool) {
    override func viewWillAppear(_ animated: Bool) {
        //: super.viewWillAppear(animated)
        super.viewWillAppear(animated)
    }

    //: override func viewDidDisappear(_ animated: Bool) {
    override func viewDidDisappear(_ animated: Bool) {
        //: super.viewDidDisappear(animated)
        super.viewDidDisappear(animated)
    }

    //: override func viewDidLoad() {
    override func viewDidLoad() {
        //: super.viewDidLoad()
        super.viewDidLoad()
        //: self.hideNavi = true
        self.hideNavi = true
        //: checkLocationAuth()
        sizeFor()
        //: addNotifications()
        assemblageNotifications()
    }

    //: deinit {
    deinit {
        //: NotificationCenter.default.removeObserver(self)
        NotificationCenter.default.removeObserver(self)
    }

    //: private lazy var cardView: TalkingClubCardView = {
    private lazy var cardView: BlockObjectProtocol = {
        //: let height = ScreenHeight - TabBarViewHeight - StatusBarHeight - 117 - 12
        let height = consLet_sessionName - consLet_clickReplaceName - consLet_netViewValue - 117 - 12
        //: let view = TalkingClubCardView.init(frame: CGRect.init(x: 10, y: StatusBarHeight+12, width: ScreenWidth-20, height: height))
        let view = BlockObjectProtocol(frame: CGRect(x: 10, y: consLet_netViewValue + 12, width: consLet_errorDeviceHeightData - 20, height: height))
        //: view.backgroundColor = .clear
        view.backgroundColor = .clear
        //: view.dataSource = self
        view.dataSource = self
        //: view.delegate = self
        view.delegate = self
        //: view.visibleCount = 10
        view.visibleCount = 10
        //: view.lineSpacing = 0.0
        view.lineSpacing = 0.0
        //: view.interitemSpacing = 0.0
        view.interitemSpacing = 0.0
        //: view.maxAngle = 0.0
        view.maxAngle = 0.0
        //: view.isAlpha = true
        view.isAlpha = true
        //: view.maxRemoveDistance = 150.0
        view.maxRemoveDistance = 150.0
        //: if LanguageManager.shared.direction == .rightToLeft {
        if ServerLanguageManager.shared.direction == .rightToLeft {
            //: view.maxRemoveDistance = 130.0
            view.maxRemoveDistance = 130.0
        }
        //: view.layer.cornerRadius = 10.0
        view.layer.cornerRadius = 10.0
        //: view.registerClass(cellClass: TalkingClubCardItemCell.self, forellIdentifier: CardCellId)
        view.substitutionClassIdentifier(cellClass: ResourceFailRecognizerDelegate.self, forellIdentifier: CardCellId)
        //: return view
        return view
        //: }()
    }()

    //: private lazy var disLikeBtn: UIButton = {
    private lazy var disLikeBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.nearTap(name: "icon_match_dislikeBtn_nor"), for: .normal)
        img.setImage(UIImage.nearTap(name: (str_nearText.replacingOccurrences(of: "count", with: "n") + "_mat" + String(str_makeName.prefix(4)) + "islik" + String(str_headValue) + String(str_toValue))), for: .normal)
        //: img.addTarget(self, action: #selector(disLikeBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(finishLocation), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var hiBtn: UIButton = {
    private lazy var hiBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.nearTap(name: "icon_match_hiBtn_nor"), for: .normal)
        img.setImage(UIImage.nearTap(name: (str_thanName.replacingOccurrences(of: "win", with: "i") + String(str_sizeData))), for: .normal)
        //: img.addTarget(self, action: #selector(hiBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(dataDoingTable), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var likeBtn: UIButton = {
    private lazy var likeBtn: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setImage(UIImage.nearTap(name: "icon_match_likeBtn_nor"), for: .normal)
        img.setImage(UIImage.nearTap(name: (str_connectRowData.replacingOccurrences(of: "style", with: "c") + "_match" + String(str_valueName.suffix(5)) + "Btn_no" + str_visualTitle.replacingOccurrences(of: "mode", with: "r"))), for: .normal)
        //: img.addTarget(self, action: #selector(likeBtnClick), for: .touchUpInside)
        img.addTarget(self, action: #selector(clickMake), for: .touchUpInside)
        //: return img
        return img
        //: }()
    }()

    //: private lazy var emptyV: SocialEmptyView = {
    private lazy var emptyV: DeviceView = {
        //: let v = SocialEmptyView()
        let v = DeviceView()
        //: return v
        return v
        //: }()
    }()

    //: private lazy var locationBtn: UIButton = {
    private lazy var locationBtn: UIButton = {
        //: let btn = UIButton.init()
        let btn = UIButton()
        //: btn.setTitle("Enable  Location".localized, for: .normal)
        btn.setTitle((String(str_tableValue.suffix(4)) + "le  L" + str_progressName.replacingOccurrences(of: "color", with: "t")).localized, for: .normal)
        //: btn.titleLabel?.font = UIFont.loadEnable(type: .Medium, fontSize: 17)
        btn.titleLabel?.font = UIFont.loadEnable(type: .Medium, fontSize: 17)
        //: btn.setTitleColor(.white, for: .normal)
        btn.setTitleColor(.white, for: .normal)
        //: btn.layer.cornerRadius = 25
        btn.layer.cornerRadius = 25
        //: btn.clipsToBounds = true
        btn.clipsToBounds = true
        //: btn.setBackgroundImage(UIImage.imageGradientColor(colors: UIColor.appGradientColor(), size: CGSize(width: ScreenWidth-80, height: 50)), for: .normal)
        btn.setBackgroundImage(UIImage.onCornerTo(colors: UIColor.gradient(), size: CGSize(width: consLet_errorDeviceHeightData - 80, height: 50)), for: .normal)
        //: btn.addTarget(self, action: #selector(locationBtnClick), for: .touchUpInside)
        btn.addTarget(self, action: #selector(arrayClick), for: .touchUpInside)
        //: return btn
        return btn
        //: }()
    }()

    //: private lazy var swipedFinishView: TalkingClubCardSwipedFinishView = {
    private lazy var swipedFinishView: ListingReactiveCompatible = {
        //: let v = TalkingClubCardSwipedFinishView()
        let v = ListingReactiveCompatible()
        //: v.countdownBlock = { [weak self] in
        v.countdownBlock = { [weak self] in
            //: guard let self = self else { return }
            guard let self = self else { return }
            //: self.beginRequestData()
            self.feePosition()
        }
        //: view.addSubview(v)
        view.addSubview(v)
        //: v.snp.makeConstraints { make in
        v.snp.makeConstraints { make in
            //: make.edges.equalToSuperview()
            make.edges.equalToSuperview()
        }
        //: return v
        return v
        //: }()
    }()
}

// MARK: - 定位权限监听

//: extension TalkingClubVC {
extension ClubRecognizerDelegate {
    //: func checkLocationAuth() {
    func sizeFor() {
        //: TalkingLocationManager.shared().requestLocationAuthorizaiton()
        SommelierThen.joint().possibility()
        //: TalkingLocationManager.shared().getAuthBlock { [weak self] (type: PermissionType) in
        SommelierThen.joint().taskEqual { [weak self] (type: PresentationValueHashable) in
            //: guard let self = self else {return}
            guard let self = self else { return }
            //: switch type {
            switch type {
            //: case .firstEntry:
            case .firstEntry: // 首次进入
                //: self.refreshViewStatus()
                self.mainViewMagnitude()

            //: case .userRestricted:
            case .userRestricted: // 拒绝
                //: self.refreshViewStatus()
                self.mainViewMagnitude()
                // 展示设置弹窗
                //: self.showSettingsAlertView()
                self.pullView()

            //: case .alwaysAllowed:
            case .alwaysAllowed: // 允许
                //: self.setupView()
                self.isothermal()
                //: self.beginRequestData()
                self.feePosition()
            }
        }
        /// 上报经纬度
        //: TalkingLocationManager.shared().getLocationBlock { success, latitude, longitude in
        SommelierThen.joint().conversationAcross { success, latitude, longitude in
            //: if success {
            if success {
                //: SocialRequestManager.req_uploadPosition(params: ["lng": longitude, "lat": latitude]) { succeed, result, errorModel in
                SpectralColourRequestManager.microdot(params: ["lng": longitude, "lat": latitude]) { _, _, _ in
                }
            }
        }
    }

    /// 设置弹窗
    //: func showSettingsAlertView() {
    func pullView() {
        //: guard TalkingLocationManager.shared().locationType == .userRestricted else {
        guard SommelierThen.joint().locationType == .userRestricted else {
            //: return
            return
        }
        //: self.view.addSubview(locationBtn)
        self.view.addSubview(locationBtn)
        //: locationBtn.snp.makeConstraints { make in
        locationBtn.snp.makeConstraints { make in
            //: make.bottom.equalToSuperview().offset(-33)
            make.bottom.equalToSuperview().offset(-33)
            //: make.leading.equalTo(40)
            make.leading.equalTo(40)
            //: make.trailing.equalTo(-40)
            make.trailing.equalTo(-40)
            //: make.height.equalTo(50)
            make.height.equalTo(50)
        }
    }

    /// 刷新视图状态
    //: private func refreshViewStatus() {
    private func mainViewMagnitude() {
        // 是否开启定位判断缺省图
        //: if TalkingLocationManager.shared().locationType != .alwaysAllowed {
        if SommelierThen.joint().locationType != .alwaysAllowed {
            //: self.view.removeAllSubviews()
            self.view.removeAllSubviews()
            //: self.view.addSubview(emptyV)
            self.view.addSubview(emptyV)
            //: emptyV.snp.makeConstraints { make in
            emptyV.snp.makeConstraints { make in
                //: make.top.equalToSuperview().offset(200)
                make.top.equalToSuperview().offset(200)
                //: make.leading.trailing.bottom.equalToSuperview()
                make.leading.trailing.bottom.equalToSuperview()
            }
            //: emptyV.imgV.image = UIImage.nearTap(name: "icon_match_bg_location")
            emptyV.imgV.image = UIImage.nearTap(name: (String(str_makeContent) + String(str_sendTitle.prefix(4)) + "matc" + String(str_buttonValue.prefix(6)) + "ocation"))
            //: emptyV.desLab.text = "In order to recommend nearby people based on location, we need your permission to use location permissions".localized
            emptyV.desLab.text = String(bytes: str_playerData.map{automaticallyTap(origin: $0)}, encoding: .utf8)!.localized
        }
    }

    //: @objc private func locationBtnClick() {
    @objc private func arrayClick() {
        //: let url = URL(string: UIApplication.openSettingsURLString)
        let url = URL(string: UIApplication.openSettingsURLString)
        //: if let url = url, UIApplication.shared.canOpenURL(url) {
        if let url = url, UIApplication.shared.canOpenURL(url) {
            //: UIApplication.shared.open(url, options: [:], completionHandler: nil)
            UIApplication.shared.open(url, options: [:], completionHandler: nil)
        }
    }
}

//: extension TalkingClubVC {
extension ClubRecognizerDelegate {
    //: @objc private func disLikeBtnClick() {
    @objc private func finishLocation() {
        // 埋点
        //: uploadRecord.uploadRecordEvent(eventID: click_home_dislike, toUid: "\(self.currenModel.uid)")
        consLet_contentData.postEqual(eventID: consLet_informationName, toUid: "\(self.currenModel.uid)")
        /// 最后一条时，无法滑动
        //: if isShowSubscre {
        if isShowSubscre {
            //: cardView.restoreCellLocation()
            cardView.psychologicalFeature()
            //: PostPushManager.share.func__pushToSubscribeAlert(appendParams: "&type=0")
            PostPushManager.share.markParams(appendParams: "&type=0")
            //: return
            return
        }
        //: disLikeReq()
        nameBottomImagePic()
//        if !cardView.isUserInteractionEnabled && cellItems.count == 1 {
//            self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
//            disLikeReq()
//            return
//        }

        //: cardView.removeTopCardViewFromSwipe(direction: .Left)
        cardView.constraintTop(direction: .Left)
    }

    //: @objc private func hiBtnClick() {
    @objc private func dataDoingTable() {
        //: let uid = self.currenModel.uid
        let uid = self.currenModel.uid
        //: if uid > 0 {
        if uid > 0 {
            //: PostPushManager.share.func__pushToPriveteChatVC(chatID: "\(uid)")
            PostPushManager.share.birthday(chatID: "\(uid)")
            // 埋点
            //: uploadRecord.uploadRecordEvent(eventID: click_home_hi, toUid: "\(uid)")
            consLet_contentData.postEqual(eventID: consLet_cancelClickOffName, toUid: "\(uid)")
        }
    }

    //: @objc private func likeBtnClick() {
    @objc private func clickMake() {
        // 埋点
        //: uploadRecord.uploadRecordEvent(eventID: click_home_like, toUid: "\(self.currenModel.uid)")
        consLet_contentData.postEqual(eventID: consLet_userListName, toUid: "\(self.currenModel.uid)")
        //: if isShowSubscre {
        if isShowSubscre {
            //: cardView.restoreCellLocation()
            cardView.psychologicalFeature()
            //: PostPushManager.share.func__pushToSubscribeAlert(appendParams: "&type=0")
            PostPushManager.share.markParams(appendParams: "&type=0")
            //: return
            return
        }
        //: likeReq()
        addReq()
//        if !cardView.isUserInteractionEnabled && cellItems.count == 1 {
//            self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
//            likeReq()
//            return
//        }
        //: cardView.removeTopCardViewFromSwipe(direction: .Right)
        cardView.constraintTop(direction: .Right)
    }
}

/// 初始化模型数据
//: extension TalkingClubVC {
extension ClubRecognizerDelegate {
    //: func removeAllData() {
    func beyondCurrentData() {
        //: self.cellItems.removeAll()
        self.cellItems.removeAll()
    }

    //: func beginRequestData() {
    func feePosition() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = SafetyMarginReactiveCompatible()
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false
        //: reqModel.requestPath = "mf/business/list"
        reqModel.requestPath = (String(str_leadingTitle) + String(str_shValue))
        //: reqModel.requestType = .GET
        reqModel.requestType = .GET
        //: reqModel.params = ["tab": 1,
        reqModel.params = ["tab": 1,
                           //: "page": 0,
                           "page": 0,
                           //: "minAge": 18,
                           "minAge": 18,
                           //: "maxAge": 80,
                           "maxAge": 80,
                           //: "datingVideo": 0]
                           String(bytes: str_roomData.map{$0^168}, encoding: .utf8)!: 0]
        //: ProgressHUD.show()
        DeviceFailThen.callMake()
        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        consLet_listTitle.coloring(model: reqModel) { succeed, result, errorModel in
            //: ProgressHUD.dismiss()
            DeviceFailThen.theAdd()
            //: guard succeed == true else {
            guard succeed == true else {
                //: if errorModel?.errorCode == 10889 {
                if errorModel?.errorCode == 10889 { // 卡片额度用完
                    //: let json = JSON(result ?? {})
                    let json = JSON(result ?? {})
                    //: self.swipedFinishView.show(limitNum: json["limitNum"].int, expire: json["expire"].int)
                    self.swipedFinishView.makeWhen(limitNum: json[(String(str_actualStyleRawName.prefix(6)) + str_viewData.replacingOccurrences(of: "slide", with: "um"))].int, expire: json["expire"].int)
                    //: } else {
                } else {
                    //: if errorModel?.errorMsg.isEmpty == false {
                    if errorModel?.errorMsg.isEmpty == false {
                        //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                        self.noblesseExtra(showMsg: errorModel?.errorMsg ?? "")
                    }
                    //: self.addEmptyView()
                    self.courtView()
                }
                //: return
                return
            }
            //: let resultArr = result as! [Dictionary<String, Any>]
            let resultArr = result as! [[String: Any]]
            //: for dict in resultArr {
            for dict in resultArr {
                //: if let model = SocialUserListModel.deserialize(from: dict as? Dictionary) {
                if let model = VideoDeviceHandyJSON.deserialize(from: dict as? Dictionary) {
                    //: self.cellItems.append(model)
                    self.cellItems.append(model)
                }
            }
            //: if self.cellItems.count > 0 {
            if self.cellItems.count > 0 {
                //: self.swipedFinishView.dismiss()
                self.swipedFinishView.atImageView()
                //: if resultArr.count > 0 {
                if resultArr.count > 0 {
//                    if self.cellItems.count == 1 {
//                        self.cardView.isUserInteractionEnabled = false
//                    }else {
//                        self.cardView.isUserInteractionEnabled = true
//                    }
                    //: self.cardView.reloadData()
                    self.cardView.anyTopSend()
                    //: }else {
                } else {
                    //: self.func__showStatusBarErrorMsg(showMsg: "Too frequent requests, please try again later".localized)
                    self.noblesseExtra(showMsg: String(bytes: str_modelContent.map{frameLeft(title: $0)}, encoding: .utf8)!.localized)
                }
                //: } else {
            } else {
                //: self.swipedFinishView.show(limitNum: nil, expire: nil)
                self.swipedFinishView.makeWhen(limitNum: nil, expire: nil)
            }
        }
    }

    //: private func addEmptyView() {
    private func courtView() {
        //: self.view.removeAllSubviews()
        self.view.removeAllSubviews()
        //: self.view.addSubview(self.emptyV)
        self.view.addSubview(self.emptyV)
        //: self.emptyV.snp.makeConstraints { make in
        self.emptyV.snp.makeConstraints { make in
            //: make.top.equalToSuperview().offset(200)
            make.top.equalToSuperview().offset(200)
            //: make.leading.trailing.bottom.equalToSuperview()
            make.leading.trailing.bottom.equalToSuperview()
        }
    }

    //: private func disLikeReq() {
    private func nameBottomImagePic() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = SafetyMarginReactiveCompatible()
        //: reqModel.requestPath = "mf/newFeature/dislike"
        reqModel.requestPath = (String(str_countNativeValue) + str_targetData.replacingOccurrences(of: "message", with: "is"))
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.params = ["uid": self.currenModel.uid]
        reqModel.params = ["uid": self.currenModel.uid]
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false

        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        consLet_listTitle.coloring(model: reqModel) { _, result, errorModel in
            //: if errorModel?.errorMsg.isEmpty == false {
            if errorModel?.errorMsg.isEmpty == false {
                //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                self.noblesseExtra(showMsg: errorModel?.errorMsg ?? "")
            }
            //: if errorModel?.errorCode == 10888 {
            if errorModel?.errorCode == 10888 {
                //: PostPushManager.share.func__pushToSubscribeAlert(appendParams: "&type=0")
                PostPushManager.share.markParams(appendParams: "&type=0")
                //: self.isShowSubscre = true
                self.isShowSubscre = true

                //: } else if errorModel?.errorCode == 10889 {
            } else if errorModel?.errorCode == 10889 { // 卡片额度用完
                //: let json = JSON(result ?? {})
                let json = JSON(result ?? {})
                //: self.swipedFinishView.show(limitNum: json["limitNum"].int, expire: json["expire"].int)
                self.swipedFinishView.makeWhen(limitNum: json[(String(str_actualStyleRawName.prefix(6)) + str_viewData.replacingOccurrences(of: "slide", with: "um"))].int, expire: json["expire"].int)
            }
        }
    }

    //: private func likeReq() {
    private func addReq() {
        //: let reqModel = TalkingRequestModel.init()
        let reqModel = SafetyMarginReactiveCompatible()
        //: reqModel.requestPath = "mf/newFeature/like"
        reqModel.requestPath = (String(str_labValue) + String(str_labelData))
        //: reqModel.requestType = .POST
        reqModel.requestType = .POST
        //: reqModel.params = ["uid": self.currenModel.uid]
        reqModel.params = ["uid": self.currenModel.uid]
        //: reqModel.showErrorStatusBar = false
        reqModel.showErrorStatusBar = false

        //: GJ.startRequest(model: reqModel) { succeed, result, errorModel in
        consLet_listTitle.coloring(model: reqModel) { _, result, errorModel in
            //: if errorModel?.errorMsg.isEmpty == false {
            if errorModel?.errorMsg.isEmpty == false {
                //: self.func__showStatusBarErrorMsg(showMsg: errorModel?.errorMsg ?? "")
                self.noblesseExtra(showMsg: errorModel?.errorMsg ?? "")
            }
            //: if errorModel?.errorCode == 10888 {
            if errorModel?.errorCode == 10888 {
                //: PostPushManager.share.func__pushToSubscribeAlert(appendParams: "&type=0")
                PostPushManager.share.markParams(appendParams: "&type=0")
                //: self.isShowSubscre = true
                self.isShowSubscre = true

                //: } else if errorModel?.errorCode == 10889 {
            } else if errorModel?.errorCode == 10889 { // 卡片额度用完
                //: let json = JSON(result ?? {})
                let json = JSON(result ?? {})
                //: self.swipedFinishView.show(limitNum: json["limitNum"].intValue, expire: json["expire"].intValue)
                self.swipedFinishView.makeWhen(limitNum: json[(String(str_actualStyleRawName.prefix(6)) + str_viewData.replacingOccurrences(of: "slide", with: "um"))].intValue, expire: json["expire"].intValue)
            }
        }
    }

    /// 刷新个人资料接口
    //: @objc private func func__requestUserInfo() {
    @objc private func loadInfo() {
        //: AppManagerRequest.func__requestUserInfo { succeed, result, errorModel in
        DeviceManagerRequest.readOut { _, _, _ in
            //: self.isShowSubscre = false
            self.isShowSubscre = false
            //: self.beginRequestData()
            self.feePosition()
        }
    }
}

//: extension TalkingClubVC: TalkingClubCardViewDataSource, TalkingClubCardViewDelegate {
extension ClubRecognizerDelegate: WeltanschauungDataSource, WhiteObjectProtocol {
    //: func numberOfCountInCardView(cardView: TalkingClubCardView) -> Int {
    func clickCardView(cardView _: BlockObjectProtocol) -> Int {
        //: return cellItems.count
        return cellItems.count
    }

    //: func cardViewCellForRowAtIndex(cardView: TalkingClubCardView, index: Int) -> TalkingClubCardViewCell {
    func someAttribute(cardView: BlockObjectProtocol, index: Int) -> SequenceErrorViewCell {
        //: let cell = cardView.dequeueReusableCellWithIdentifier(identifier: CardCellId) as? TalkingClubCardItemCell
        let cell = cardView.addIdentifier(identifier: CardCellId) as? ResourceFailRecognizerDelegate
        //: let model = cellItems[index]
        let model = cellItems[index]
        //: cell?.setCellData(model: model)
        cell?.day(model: model)
        //: if index == 0 {
        if index == 0 {
            //: self.currenModel = model
            self.currenModel = model
            //: self.currenCell = cell
            self.currenCell = cell
        }

        //: cell?.layer.cornerRadius = 10.0
        cell?.layer.cornerRadius = 10.0
        //: cell?.layer.masksToBounds = true
        cell?.layer.masksToBounds = true
        //: return cell!
        return cell!
    }

    //: func CellForRowAtIndexModel(index: Int) -> SocialUserListModel {
    func scale(index: Int) -> VideoDeviceHandyJSON {
        //: let model = cellItems[index]
        let model = cellItems[index]
        //: return model
        return model
    }

    //: func didRemoveLastCell(cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int) {
    func footballPlayerUp(cardViewCell _: SequenceErrorViewCell, forRowAtIndex _: Int) {
        /// 数据查看完
        //: self.removeAllData()
        self.beyondCurrentData()
//        cardView.isUserInteractionEnabled = false
        //: beginRequestData()
        feePosition()
    }

    //: func didRemoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int, direction: Int, isGesture: Bool) {
    func cellRoom(cardView _: BlockObjectProtocol, cardViewCell _: SequenceErrorViewCell, forRowAtIndex: Int, direction: Int, isGesture: Bool) {
        //: if isGesture {
        if isGesture {
            //: if direction == 1 {
            if direction == 1 {
                // 埋点
                //: uploadRecord.uploadRecordEvent(eventID: click_home_dislike, toUid: "\(self.currenModel.uid)")
                consLet_contentData.postEqual(eventID: consLet_informationName, toUid: "\(self.currenModel.uid)")
                //: disLikeReq()
                nameBottomImagePic()
                //: }else {
            } else {
                // 埋点
                //: uploadRecord.uploadRecordEvent(eventID: click_home_like, toUid: "\(self.currenModel.uid)")
                consLet_contentData.postEqual(eventID: consLet_userListName, toUid: "\(self.currenModel.uid)")
                //: likeReq()
                addReq()
            }
        }
        //: cellItems.remove(at: 0)
        cellItems.remove(at: 0)
        //: if let model = cellItems.first {
        if let model = cellItems.first {
            //: self.currenModel = model
            self.currenModel = model
        }

        /// 最后一条
//        if cellItems.count == 1 {
//            cardView.isUserInteractionEnabled = false
//            beginRequestData()
//        }
        //: printLog(message:"didRemoveCell forRowAtIndex = \(forRowAtIndex)")
        printLog(message: (String(str_appName.prefix(6)) + str_edgeTableNotText.replacingOccurrences(of: "level", with: "e") + String(str_kitData.suffix(6)) + "orRo" + String(str_managerValue.suffix(6)) + "ex = ") + "\(forRowAtIndex)")
    }

    //: func didDisplayCell(cardViewCell: TalkingClubCardViewCell, forRowAtIndex: Int) {
    func barSize(cardViewCell _: SequenceErrorViewCell, forRowAtIndex _: Int) {}

    //: func didMoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell, forMovePoint: CGPoint) {
    func countColor(cardView _: BlockObjectProtocol, cardViewCell _: SequenceErrorViewCell, forMovePoint _: CGPoint) {}

    //: func beginMoveCell(cardView: TalkingClubCardView, cardViewCell: TalkingClubCardViewCell) {
    func enumerationCell(cardView _: BlockObjectProtocol, cardViewCell _: SequenceErrorViewCell) {
//        if isShowSubscre {
//            cardView.isUserInteractionEnabled = false
//        }
    }
}

//: extension TalkingClubVC {
extension ClubRecognizerDelegate {
    //: private func setupView() {
    private func isothermal() {
        //: self.view.backgroundColor = .clear
        self.view.backgroundColor = .clear
        //: self.view.removeAllSubviews()
        self.view.removeAllSubviews()
        //: self.view.addSubview(cardView)
        self.view.addSubview(cardView)
        //: self.view.addSubview(disLikeBtn)
        self.view.addSubview(disLikeBtn)
        //: self.view.addSubview(hiBtn)
        self.view.addSubview(hiBtn)
        //: self.view.addSubview(likeBtn)
        self.view.addSubview(likeBtn)

        //: hiBtn.snp.makeConstraints { make in
        hiBtn.snp.makeConstraints { make in
            //: make.top.equalTo(cardView.snp.bottom).offset(28)
            make.top.equalTo(cardView.snp.bottom).offset(28)
            //: make.centerX.equalTo(self.view)
            make.centerX.equalTo(self.view)
            //: make.size.equalTo(61)
            make.size.equalTo(61)
        }

        //: disLikeBtn.snp.makeConstraints { make in
        disLikeBtn.snp.makeConstraints { make in
            //: make.size.top.equalTo(hiBtn)
            make.size.top.equalTo(hiBtn)
            //: make.trailing.equalTo(hiBtn.snp.leading).offset(-48)
            make.trailing.equalTo(hiBtn.snp.leading).offset(-48)
        }

        //: likeBtn.snp.makeConstraints { make in
        likeBtn.snp.makeConstraints { make in
            //: make.size.top.equalTo(hiBtn)
            make.size.top.equalTo(hiBtn)
            //: make.leading.equalTo(hiBtn.snp.trailing).offset(48)
            make.leading.equalTo(hiBtn.snp.trailing).offset(48)
        }
    }

    /// 添加通知
    //: private func addNotifications() {
    private func assemblageNotifications() {
        //: NotificationCenter.default.addObserver(self,
        NotificationCenter.default.addObserver(self,
                                               //: selector: #selector(self.func__requestUserInfo),
                                               selector: #selector(self.loadInfo),
                                               //: name: APPLE_IAP_SUBSCRIBE_SUCCEED_NOTIFICATION,
                                               name: consLet_timeKeyValue,
                                               //: object: nil)
                                               object: nil)
    }
}
